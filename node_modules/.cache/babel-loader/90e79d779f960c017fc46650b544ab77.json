{"ast":null,"code":"var __extends = this && this.t || function () {\n  var extendStatics = function (t, i) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, i) {\n      t.__proto__ = i;\n    } || function (t, i) {\n      for (var r in i) if (Object.prototype.hasOwnProperty.call(i, r)) t[r] = i[r];\n    };\n\n    return extendStatics(t, i);\n  };\n\n  return function (t, i) {\n    if (typeof i !== \"function\" && i !== null) throw new TypeError(\"Class extends value \" + String(i) + \" is not a constructor or null\");\n    extendStatics(t, i);\n\n    function __() {\n      this.constructor = t;\n    }\n\n    t.prototype = i === null ? Object.create(i) : (__.prototype = i.prototype, new __());\n  };\n}();\n\nimport { Container, ContainerIterator } from \"../../ContainerBase\";\nimport checkObject from \"../../../utils/checkObject\";\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\n\nvar HashContainerIterator = function (t) {\n  __extends(HashContainerIterator, t);\n\n  function HashContainerIterator(i, r, e) {\n    var n = t.call(this, e) || this;\n    n.o = i;\n    n.h = r;\n\n    if (n.iteratorType === 0) {\n      n.pre = function () {\n        if (this.o.L === this.h) {\n          throwIteratorAccessError();\n        }\n\n        this.o = this.o.L;\n        return this;\n      };\n\n      n.next = function () {\n        if (this.o === this.h) {\n          throwIteratorAccessError();\n        }\n\n        this.o = this.o.m;\n        return this;\n      };\n    } else {\n      n.pre = function () {\n        if (this.o.m === this.h) {\n          throwIteratorAccessError();\n        }\n\n        this.o = this.o.m;\n        return this;\n      };\n\n      n.next = function () {\n        if (this.o === this.h) {\n          throwIteratorAccessError();\n        }\n\n        this.o = this.o.L;\n        return this;\n      };\n    }\n\n    return n;\n  }\n\n  return HashContainerIterator;\n}(ContainerIterator);\n\nexport { HashContainerIterator };\n\nvar HashContainer = function (t) {\n  __extends(HashContainer, t);\n\n  function HashContainer() {\n    var i = t.call(this) || this;\n    i._ = [];\n    i.I = {};\n    i.HASH_TAG = Symbol(\"@@HASH_TAG\");\n    Object.setPrototypeOf(i.I, null);\n    i.h = {};\n    i.h.L = i.h.m = i.H = i.l = i.h;\n    return i;\n  }\n\n  HashContainer.prototype.G = function (t) {\n    var i = t.L,\n        r = t.m;\n    i.m = r;\n    r.L = i;\n\n    if (t === this.H) {\n      this.H = r;\n    }\n\n    if (t === this.l) {\n      this.l = i;\n    }\n\n    this.M -= 1;\n  };\n\n  HashContainer.prototype.v = function (t, i, r) {\n    if (r === undefined) r = checkObject(t);\n    var e;\n\n    if (r) {\n      var n = t[this.HASH_TAG];\n\n      if (n !== undefined) {\n        this._[n].p = i;\n        return this.M;\n      }\n\n      Object.defineProperty(t, this.HASH_TAG, {\n        value: this._.length,\n        configurable: true\n      });\n      e = {\n        u: t,\n        p: i,\n        L: this.l,\n        m: this.h\n      };\n\n      this._.push(e);\n    } else {\n      var s = this.I[t];\n\n      if (s) {\n        s.p = i;\n        return this.M;\n      }\n\n      e = {\n        u: t,\n        p: i,\n        L: this.l,\n        m: this.h\n      };\n      this.I[t] = e;\n    }\n\n    if (this.M === 0) {\n      this.H = e;\n      this.h.m = e;\n    } else {\n      this.l.m = e;\n    }\n\n    this.l = e;\n    this.h.L = e;\n    return ++this.M;\n  };\n\n  HashContainer.prototype.g = function (t, i) {\n    if (i === undefined) i = checkObject(t);\n\n    if (i) {\n      var r = t[this.HASH_TAG];\n      if (r === undefined) return this.h;\n      return this._[r];\n    } else {\n      return this.I[t] || this.h;\n    }\n  };\n\n  HashContainer.prototype.clear = function () {\n    var t = this.HASH_TAG;\n\n    this._.forEach(function (i) {\n      delete i.u[t];\n    });\n\n    this._ = [];\n    this.I = {};\n    Object.setPrototypeOf(this.I, null);\n    this.M = 0;\n    this.H = this.l = this.h.L = this.h.m = this.h;\n  };\n\n  HashContainer.prototype.eraseElementByKey = function (t, i) {\n    var r;\n    if (i === undefined) i = checkObject(t);\n\n    if (i) {\n      var e = t[this.HASH_TAG];\n      if (e === undefined) return false;\n      delete t[this.HASH_TAG];\n      r = this._[e];\n      delete this._[e];\n    } else {\n      r = this.I[t];\n      if (r === undefined) return false;\n      delete this.I[t];\n    }\n\n    this.G(r);\n    return true;\n  };\n\n  HashContainer.prototype.eraseElementByIterator = function (t) {\n    var i = t.o;\n\n    if (i === this.h) {\n      throwIteratorAccessError();\n    }\n\n    this.G(i);\n    return t.next();\n  };\n\n  HashContainer.prototype.eraseElementByPos = function (t) {\n    if (t < 0 || t > this.M - 1) {\n      throw new RangeError();\n    }\n\n    var i = this.H;\n\n    while (t--) {\n      i = i.m;\n    }\n\n    this.G(i);\n    return this.M;\n  };\n\n  return HashContainer;\n}(Container);\n\nexport { HashContainer };","map":{"version":3,"sources":["container/HashContainer/Base/index.js","../../src/container/HashContainer/Base/index.ts"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","_this","HashContainerIterator","HashContainer","Container","ContainerIterator","checkObject","throwIteratorAccessError","RangeError","node","header","iteratorType","_super","_node","_header","pre","_pre","next","_next","Symbol","_originMap","_head","_tail","_length","key","value","isObject","undefined","newTail","index","HASH_TAG","_objMap","_value","defineProperty","length","configurable","_key","push","forEach","el","_eraseNode","iter","pos"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Container, ContainerIterator } from \"../../ContainerBase\";\nimport checkObject from \"../../../utils/checkObject\";\nimport $checkWithinAccessParams from \"../../../utils/checkParams.macro\";\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\nvar HashContainerIterator = /** @class */ (function (_super) {\n    __extends(HashContainerIterator, _super);\n    /**\n     * @internal\n     */\n    function HashContainerIterator(node, header, iteratorType) {\n        var _this = _super.call(this, iteratorType) || this;\n        _this._node = node;\n        _this._header = header;\n        if (_this.iteratorType === 0 /* IteratorType.NORMAL */) {\n            _this.pre = function () {\n                if (this._node._pre === this._header) {\n                    throwIteratorAccessError();\n                }\n                this._node = this._node._pre;\n                return this;\n            };\n            _this.next = function () {\n                if (this._node === this._header) {\n                    throwIteratorAccessError();\n                }\n                this._node = this._node._next;\n                return this;\n            };\n        }\n        else {\n            _this.pre = function () {\n                if (this._node._next === this._header) {\n                    throwIteratorAccessError();\n                }\n                this._node = this._node._next;\n                return this;\n            };\n            _this.next = function () {\n                if (this._node === this._header) {\n                    throwIteratorAccessError();\n                }\n                this._node = this._node._pre;\n                return this;\n            };\n        }\n        return _this;\n    }\n    return HashContainerIterator;\n}(ContainerIterator));\nexport { HashContainerIterator };\nvar HashContainer = /** @class */ (function (_super) {\n    __extends(HashContainer, _super);\n    /**\n     * @internal\n     */\n    function HashContainer() {\n        var _this = _super.call(this) || this;\n        /**\n         * @internal\n         */\n        _this._objMap = [];\n        /**\n         * @internal\n         */\n        _this._originMap = {};\n        /**\n         * @description Unique symbol used to tag object.\n         */\n        _this.HASH_TAG = Symbol('@@HASH_TAG');\n        Object.setPrototypeOf(_this._originMap, null);\n        _this._header = {};\n        _this._header._pre = _this._header._next = _this._head = _this._tail = _this._header;\n        return _this;\n    }\n    /**\n     * @internal\n     */\n    HashContainer.prototype._eraseNode = function (node) {\n        var _pre = node._pre, _next = node._next;\n        _pre._next = _next;\n        _next._pre = _pre;\n        if (node === this._head) {\n            this._head = _next;\n        }\n        if (node === this._tail) {\n            this._tail = _pre;\n        }\n        this._length -= 1;\n    };\n    /**\n     * @internal\n     */\n    HashContainer.prototype._set = function (key, value, isObject) {\n        if (isObject === undefined)\n            isObject = checkObject(key);\n        var newTail;\n        if (isObject) {\n            var index = key[this.HASH_TAG];\n            if (index !== undefined) {\n                this._objMap[index]._value = value;\n                return this._length;\n            }\n            Object.defineProperty(key, this.HASH_TAG, {\n                value: this._objMap.length,\n                configurable: true\n            });\n            newTail = {\n                _key: key,\n                _value: value,\n                _pre: this._tail,\n                _next: this._header\n            };\n            this._objMap.push(newTail);\n        }\n        else {\n            var node = this._originMap[key];\n            if (node) {\n                node._value = value;\n                return this._length;\n            }\n            newTail = {\n                _key: key,\n                _value: value,\n                _pre: this._tail,\n                _next: this._header\n            };\n            this._originMap[key] = newTail;\n        }\n        if (this._length === 0) {\n            this._head = newTail;\n            this._header._next = newTail;\n        }\n        else {\n            this._tail._next = newTail;\n        }\n        this._tail = newTail;\n        this._header._pre = newTail;\n        return ++this._length;\n    };\n    /**\n     * @internal\n     */\n    HashContainer.prototype._findElementNode = function (key, isObject) {\n        if (isObject === undefined)\n            isObject = checkObject(key);\n        if (isObject) {\n            var index = key[this.HASH_TAG];\n            if (index === undefined)\n                return this._header;\n            return this._objMap[index];\n        }\n        else {\n            return this._originMap[key] || this._header;\n        }\n    };\n    HashContainer.prototype.clear = function () {\n        var HASH_TAG = this.HASH_TAG;\n        this._objMap.forEach(function (el) {\n            delete el._key[HASH_TAG];\n        });\n        this._objMap = [];\n        this._originMap = {};\n        Object.setPrototypeOf(this._originMap, null);\n        this._length = 0;\n        this._head = this._tail = this._header._pre = this._header._next = this._header;\n    };\n    /**\n     * @description Remove the element of the specified key.\n     * @param key - The key you want to remove.\n     * @param isObject - Tell us if the type of inserted key is `object` to improve efficiency.<br/>\n     *                   If a `undefined` value is passed in, the type will be automatically judged.\n     * @returns Whether erase successfully.\n     */\n    HashContainer.prototype.eraseElementByKey = function (key, isObject) {\n        var node;\n        if (isObject === undefined)\n            isObject = checkObject(key);\n        if (isObject) {\n            var index = key[this.HASH_TAG];\n            if (index === undefined)\n                return false;\n            delete key[this.HASH_TAG];\n            node = this._objMap[index];\n            delete this._objMap[index];\n        }\n        else {\n            node = this._originMap[key];\n            if (node === undefined)\n                return false;\n            delete this._originMap[key];\n        }\n        this._eraseNode(node);\n        return true;\n    };\n    HashContainer.prototype.eraseElementByIterator = function (iter) {\n        var node = iter._node;\n        if (node === this._header) {\n            throwIteratorAccessError();\n        }\n        this._eraseNode(node);\n        return iter.next();\n    };\n    HashContainer.prototype.eraseElementByPos = function (pos) {\n        if (pos < 0 || pos > this._length - 1) {\n            throw new RangeError();\n        }\n        var node = this._head;\n        while (pos--) {\n            node = node._next;\n        }\n        this._eraseNode(node);\n        return this._length;\n    };\n    return HashContainer;\n}(Container));\nexport { HashContainer };\n","import { Container, ContainerIterator, IteratorType } from '@/container/ContainerBase';\nimport checkObject from '@/utils/checkObject';\nimport $checkWithinAccessParams from '@/utils/checkParams.macro';\nimport { throwIteratorAccessError } from '@/utils/throwError';\n\nexport type HashLinkNode<K, V> = {\n  _key: K,\n  _value: V,\n  _pre: HashLinkNode<K, V>,\n  _next: HashLinkNode<K, V>\n}\n\nexport abstract class HashContainerIterator<K, V> extends ContainerIterator<K | [K, V]> {\n  abstract readonly container: HashContainer<K, V>;\n  /**\n   * @internal\n   */\n  _node: HashLinkNode<K, V>;\n  /**\n   * @internal\n   */\n  protected readonly _header: HashLinkNode<K, V>;\n  /**\n   * @internal\n   */\n  protected constructor(\n    node: HashLinkNode<K, V>,\n    header: HashLinkNode<K, V>,\n    iteratorType?: IteratorType\n  ) {\n    super(iteratorType);\n    this._node = node;\n    this._header = header;\n    if (this.iteratorType === IteratorType.NORMAL) {\n      this.pre = function () {\n        if (this._node._pre === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre;\n        return this;\n      };\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next;\n        return this;\n      };\n    } else {\n      this.pre = function () {\n        if (this._node._next === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next;\n        return this;\n      };\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre;\n        return this;\n      };\n    }\n  }\n  // @ts-ignore\n  pre(): this;\n  // @ts-ignore\n  next(): this;\n}\n\nexport abstract class HashContainer<K, V> extends Container<K | [K, V]> {\n  /**\n   * @internal\n   */\n  protected _objMap: HashLinkNode<K, V>[] = [];\n  /**\n   * @internal\n   */\n  protected _originMap: Record<string, HashLinkNode<K, V>> = {};\n  /**\n   * @internal\n   */\n  protected _head: HashLinkNode<K, V>;\n  /**\n   * @internal\n   */\n  protected _tail: HashLinkNode<K, V>;\n  /**\n   * @internal\n   */\n  protected readonly _header: HashLinkNode<K, V>;\n  /**\n   * @description Unique symbol used to tag object.\n   */\n  readonly HASH_TAG = Symbol('@@HASH_TAG');\n  /**\n   * @internal\n   */\n  protected constructor() {\n    super();\n    Object.setPrototypeOf(this._originMap, null);\n    this._header = <HashLinkNode<K, V>>{};\n    this._header._pre = this._header._next = this._head = this._tail = this._header;\n  }\n  /**\n   * @internal\n   */\n  protected _eraseNode(node: HashLinkNode<K, V>) {\n    const { _pre, _next } = node;\n    _pre._next = _next;\n    _next._pre = _pre;\n    if (node === this._head) {\n      this._head = _next;\n    }\n    if (node === this._tail) {\n      this._tail = _pre;\n    }\n    this._length -= 1;\n  }\n  /**\n   * @internal\n   */\n  protected _set(key: K, value?: V, isObject?: boolean) {\n    if (isObject === undefined) isObject = checkObject(key);\n    let newTail;\n    if (isObject) {\n      const index = (<Record<symbol, number>><unknown>key)[this.HASH_TAG];\n      if (index !== undefined) {\n        this._objMap[<number>index]._value = <V>value;\n        return this._length;\n      }\n      Object.defineProperty(key, this.HASH_TAG, {\n        value: this._objMap.length,\n        configurable: true\n      });\n      newTail = {\n        _key: key,\n        _value: <V>value,\n        _pre: this._tail,\n        _next: this._header\n      };\n      this._objMap.push(newTail);\n    } else {\n      const node = this._originMap[<string><unknown>key];\n      if (node) {\n        node._value = <V>value;\n        return this._length;\n      }\n      newTail = {\n        _key: key,\n        _value: <V>value,\n        _pre: this._tail,\n        _next: this._header\n      };\n      this._originMap[<string><unknown>key] = newTail;\n    }\n    if (this._length === 0) {\n      this._head = newTail;\n      this._header._next = newTail;\n    } else {\n      this._tail._next = newTail;\n    }\n    this._tail = newTail;\n    this._header._pre = newTail;\n    return ++this._length;\n  }\n  /**\n   * @internal\n   */\n  protected _findElementNode(key: K, isObject?: boolean) {\n    if (isObject === undefined) isObject = checkObject(key);\n    if (isObject) {\n      const index = (<Record<symbol, number>><unknown>key)[this.HASH_TAG];\n      if (index === undefined) return this._header;\n      return this._objMap[index];\n    } else {\n      return this._originMap[<string><unknown>key] || this._header;\n    }\n  }\n  clear() {\n    const HASH_TAG = this.HASH_TAG;\n    this._objMap.forEach(function (el) {\n      delete (<Record<symbol, number>><unknown>el._key)[HASH_TAG];\n    });\n    this._objMap = [];\n    this._originMap = {};\n    Object.setPrototypeOf(this._originMap, null);\n    this._length = 0;\n    this._head = this._tail = this._header._pre = this._header._next = this._header;\n  }\n  /**\n   * @description Remove the element of the specified key.\n   * @param key - The key you want to remove.\n   * @param isObject - Tell us if the type of inserted key is `object` to improve efficiency.<br/>\n   *                   If a `undefined` value is passed in, the type will be automatically judged.\n   * @returns Whether erase successfully.\n   */\n  eraseElementByKey(key: K, isObject?: boolean) {\n    let node;\n    if (isObject === undefined) isObject = checkObject(key);\n    if (isObject) {\n      const index = (<Record<symbol, number>><unknown>key)[this.HASH_TAG];\n      if (index === undefined) return false;\n      delete (<Record<symbol, number>><unknown>key)[this.HASH_TAG];\n      node = this._objMap[index];\n      delete this._objMap[index];\n    } else {\n      node = this._originMap[<string><unknown>key];\n      if (node === undefined) return false;\n      delete this._originMap[<string><unknown>key];\n    }\n    this._eraseNode(node);\n    return true;\n  }\n  eraseElementByIterator(iter: HashContainerIterator<K, V>) {\n    const node = iter._node;\n    if (node === this._header) {\n      throwIteratorAccessError();\n    }\n    this._eraseNode(node);\n    return iter.next();\n  }\n  eraseElementByPos(pos: number) {\n    $checkWithinAccessParams!(pos, 0, this._length - 1);\n    let node = this._head;\n    while (pos--) {\n      node = node._next;\n    }\n    this._eraseNode(node);\n    return this._length;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}